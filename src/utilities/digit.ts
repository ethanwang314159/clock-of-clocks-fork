import { DigitKey } from "$src/types/digit";
import { RotationKey } from "$src/types/rotation";

export const rotation = {
  "/|": [90, 90],
  "|/": [270, 270],
  "/-": [0, 0],
  "-/": [180, 180],
  " ": [135, 135],
  "┘": [180, 270],
  "└": [0, 270],
  "┐": [90, 180],
  "┌": [0, 90],
  "-": [0, 180],
  "|": [90, 270],
  "?": [Math.random()*360, Math.random()*360]
}

export const big_digits = {
  "0": [
    "┌", "-", "-", "┐",
    "|", "┌", "┐", "|",
    "|", "|", "|", "|",
    "|", "|", "|", "|",
    "|", "└", "┘", "|",
    "└", "-", "-", "┘",
  ],

  "1": [
    "┌", "-", "┐", " ",
    "└", "┐", "|", " ",
    " ", "|", "|", " ",
    " ", "|", "|", " ",
    "┌", "┘", "└", "┐",
    "└", "-", "-", "┘",
  ],

  "2": [
    "┌", "-", "-", "┐",
    "└", "-", "┐", "|",
    "┌", "-", "┘", "|",
    "|", "┌", "-", "┘",
    "|", "└", "-", "┐",
    "└", "-", "-", "┘",
  ],

  "3": [
    "┌", "-", "-", "┐",
    "└", "-", "┐", "|",
    " ", "┌", "┘", "|",
    " ", "└", "┐", "|",
    "┌", "-", "┘", "|",
    "└", "-", "-", "┘",
  ],

  "4": [
    "┌", "┐", "┌", "┐",
    "|", "|", "|", "|",
    "|", "└", "┘", "|",
    "└", "-", "┐", "|",
    " ", " ", "|", "|",
    " ", " ", "└", "┘",
  ],

  "5": [
    "┌", "-", "-", "┐",
    "|", "┌", "-", "┘",
    "|", "└", "-", "┐",
    "└", "-", "┐", "|",
    "┌", "-", "┘", "|",
    "└", "-", "-", "┘",
  ],

  "6": [
    "┌", "-", "-", "┐",
    "|", "┌", "-", "┘",
    "|", "└", "-", "┐",
    "|", "┌", "┐", "|",
    "|", "└", "┘", "|",
    "└", "-", "-", "┘",
  ],

  "7": [
    "┌", "-", "-", "┐",
    "└", "-", "┐", "|",
    " ", " ", "|", "|",
    " ", " ", "|", "|",
    " ", " ", "|", "|",
    " ", " ", "└", "┘",
  ],

  "8": [
    "┌", "-", "-", "┐",
    "|", "┌", "┐", "|",
    "|", "└", "┘", "|",
    "|", "┌", "┐", "|",
    "|", "└", "┘", "|",
    "└", "-", "-", "┘",
  ],

  "9": [
    "┌", "-", "-", "┐",
    "|", "┌", "┐", "|",
    "|", "└", "┘", "|",
    "└", "-", "┐", "|",
    "┌", "-", "┘", "|",
    "└", "-", "-", "┘",
  ],
}

export const small_digits = {
    "0": [
    "┌",  "┐",
    "|",  "|",
    "└",  "┘",
  ],

  "1": [
    " ", "/|",
    " ", "|", 
    " ", "|/", 
  ],

  "2": [
    "/-", "┐",
    "┌", "┘",
    "└", "-/",
  ],

  "3": [
    "/-", "┐",
    "/-", "┘",
    "/-", "┘",
  ],

  "4": [
    "/|", "/|",
    "└", "|", 
    " ", "|/",
  ],

  "5": [
    "┌", "-/", 
    "└", "┐",
    "/-", "┘"
  ],

  "6": [
    "┌", "-/", 
    "|", "┐",
    "└", "┘"
  ],

  "7": [
    "/-", "┐",
    " ", "|",
    " ", "|/",
  ],

  "8": [
    "┌", "┐",
    "└", "┘",
    "└", "┘"
  ],

  "9": [
    "┌", "┐",
    "└", "|",
    "/-", "┘",
  ]
}

export const smal_digits = {
    "0": [
    "┌",  "/|",
    "|",  "|",
    "└",  "┘",
  ],

  "1": [
    "/|", "┐",
    " ", "|", 
    " ", "|/", 
  ],

  "2": [
    "┐", "-/",
    "┌", "┘",
    "└", "-/",
  ],

  "3": [
    "-/", "┘",
    "/-", "┘",
    "/-", "┘",
  ],

  "4": [
    "┘", "|/",
    "└", "|", 
    " ", "|/",
  ],

  "5": [
    "|/", "└", 
    "└", "┐",
    "/-", "┘"
  ],

  "6": [
    "└", "/-", 
    "|", "┐",
    "└", "┘"
  ],

  "7": [
    "/-", "-/",
    " ", "|",
    " ", "|/",
  ],

  "8": [
    "-/", "/-",
    "└", "┘",
    "└", "┘"
  ],

  "9": [
    "/-", "┌",
    "└", "|",
    "/-", "┘",
  ]
}

export const button_rots = {
  "S": ["┌", "┐", "└", "┘"],
  "L" : ["┌", "-", "┐", "|", " ", "|", "└", "-", "┘"]
}

export const cell = (value: string, index: number, small: boolean) => {
  const big = big_digits as Record<DigitKey, string[]>;
  const smallMap = small_digits as Record<DigitKey, string[]>;
  const digitMap = small ? smallMap : big;
  const digit = digitMap[value as DigitKey];
  if (digit) {
    const symbol = digit[index] as RotationKey;
    const pair = rotation[symbol];
    if (pair) return pair;
  }

  return rotation[" "];
};

export const setDigitSize = (small: boolean) => {
  if (small) {
    document.documentElement.style.setProperty('--column', `2`);
    document.documentElement.style.setProperty('--row', `3`);
  } else {
    document.documentElement.style.setProperty('--column', `4`);
    document.documentElement.style.setProperty('--row', `6`);
  }
};